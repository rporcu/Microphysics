# cache:
#   key: "$CI_BUILD_REF_NAME"
#   untracked: true
#   paths:
#     - build/

stages:
  - build
  - buildtest
  - test

buildtest_dem01:
  stage: build
  script:
    - cd tests/DEM01
    - echo path is $PATH
    - module list
    - cmake --version
    - cmake ../..
    - make mfix
  artifacts:
    paths:
    - build

buildtest_dem02:
  stage: buildtest
  script:
    - cd tests/DEM02
    - cmake ../..
    - make mfix
  artifacts:
    paths:
    - build

buildtest_dem03:
  stage: buildtest
  script:
    - cd tests/DEM03
    - cmake ../..
    - make mfix
  artifacts:
    paths:
    - build

buildtest_dem04:
  stage: buildtest
  script:
    - cd tests/DEM04
    - cmake ../..
    - make mfix
  artifacts:
    paths:
    - build

buildtest_dem05:
  stage: buildtest
  script:
    - cd tests/DEM05
    - cmake ../..
    - make mfix
  artifacts:
    paths:
    - build

buildtest_dem06:
  stage: buildtest
  script:
    - cd tests/DEM06
    - cmake ../..
    - make mfix
  artifacts:
    paths:
    - build

test_dem01:
  stage: test
  script:
    - cd tests/DEM01
    - cmake ../..
    - make test

test_dem02:
  stage: test
  script:
    - cd tests/DEM02
    - cmake ../..
    - make test

test_dem03:
  stage: test
  script:
    - cd tests/DEM03
    - cmake ../..
    - make test

test_dem04:
  stage: test
  script:
    - cd tests/DEM04
    - cmake ../..
    - make test

test_dem05:
  stage: test
  script:
    - cd tests/DEM05
    - cmake ../..
    - make test

test_dem06:
  stage: test
  script:
    - cd tests/DEM06
    - cmake ../..
    - make test
