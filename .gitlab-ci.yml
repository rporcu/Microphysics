# cache:
#   key: "$CI_BUILD_REF_NAME"
#   untracked: true
#   paths:
#     - build/

image: mfixexa

stages:
  - build
  - test

build:
  stage: build
  script:
    - mkdir build
    - cd build
    - FC='gfortran -g -std=f2008 -fcheck=all -Wall' cmake ..
    - make
  artifacts:
    paths:
    - build

test:
  stage: test
  script:
    - cd build
    - env CTEST_OUTPUT_ON_FAILURE=1 make test
