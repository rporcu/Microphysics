
### Grid/AMR

# Number of grid cells in each direction at the coarsest level
amr.n_cell = 32 32 48
# Maximum allowable size of each subdomain in the problem domain;
#    this is used to decompose the domain for parallel calculations.
#amr.max_grid_size   = 1024
amr.max_grid_size_x = 32
amr.max_grid_size_y = 32
amr.max_grid_size_z = 32
maxboxsize          = 1024
# Maximum tile size within each grid
fabarray.mfiter_tile_size = 1024 1024 1024
# Maximum particle title size
particles.tile_size       = 1024 1024 1024
# Maximum level in hierarchy (for now must be 0, i.e., one level in total)
amr.max_level = 0

mfix.drag_types = "BVK2"

### Simulation Runtime Parameters

#  Run time of simulation
amr.stop_time = 3.20
#amr.restart   ="chk32000"

# Regridding and Load Balancing
amr.dual_grid          = 0
amr.regrid_int         = 25
mfix.load_balance_type = "KnapSack"

# default is "RunTimeCosts"; options include RunTimeCosts or NumParticles
# this option is only relevant if load_balance_type = KnapSack
mfix.knapsack_weight_type = "NumParticles"
mfix.knapsack_weight_type = "RunTimeCosts"


### Particle Initialization

mfix.particle_init_type = "Auto"


### Plotting and Checkpoints

amr.par_ascii_int  =-1
amr.par_ascii_file ="vis"
amr.plot_int       = 20
amr.plot_file      ="plt"
amr.check_int      = 1000
amr.check_file     ="chk"


### Embedded Boundaries

mfix.use_walls        = true
mfix.use_poly2        = false
mfix.poly2_mirror     = false  # Fluid is on the inside of cylinder
mfix.write_eb_surface = true   # Needed to output eb-surfaces
mfix.use_divider      = true

# Cylinder ::  x^2 + y^2 = R^2
mfix.poly2_x_coeffs  =   0.00     0.00     1.00
mfix.poly2_y_coeffs  =   0.00     0.00     1.00
mfix.poly2_z_coeffs  =  -2.56e-6  0.00     0.00
mfix.poly2_translate =   1.6e-3   1.6e-3   0.00

# Divider (dividing wall)
mfix.divider_position = 1.6e-3
mfix.divider_height   = 0.0019
mfix.divider_width    = 0.00008
mfix.divider_dir      = 0

# Wall-Collision algorithm details:
# Level-set refinement and padding
mfix.levelset__refinement    = 1
mfix.levelset__pad           = 2
# EBIS refinement and padding
mfix.levelset__eb_refinement = 1
mfix.levelset__eb_pad        = 2


### Geometry

geometry.coord_sys   = 0                       # 0: Cartesian
geometry.is_periodic = 0       1       0       # Is periodic in each direction?
geometry.prob_lo     = 0.      0.      0.      # lo corner of physical domain
geometry.prob_hi     = 0.0032  0.0032  0.0048  # hi corner of physical domain
